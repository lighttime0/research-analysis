# 大四春季学期毕设周报

有关毕设的相关文档、资料，可在这里找到→ [Graduation Project](https://github.com/Pacific73/GraduationProject)

## 第二周 2018.3.5 - 2018.3.8

### 主要进展

- 整理毕设思路。见[整体思路](https://github.com/Pacific73/GraduationProject/blob/master/notes/%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF.md)。
- 阅读了[TailBench: A Benchmark Suite and Evaluation Methodology for Latency-Critical Applications](http://people.csail.mit.edu/sanchez/papers/2016.tailbench.iiswc.pdf)。
  - 一个用来测试LC任务latency的测试集，基于client-server的程序设计理念。
  - 有loopback/networked/integrated三种模式
    - loopback为本地多进程测量，包含本机网络协议栈延迟。
    - networked为多机测量，包含机器间网络协议栈延迟及网络传输延迟。
    - integrated为本机单进程测量，数据包通过内存直接通信，不经过网络协议栈。
  - 8个标准测试程序，涵盖websearch/key-value存储/在线ml任务响应等。
  - 配置并跑通了silo，xapian，masstree和moses四个测试程序。
    - guide: [install tailbench](https://github.com/riscv-labs/references/blob/master/Install_tailbench.md)
  - tailbench为干扰实验提供了最基本的测量指标。
- loopback模式下实验有如下注意事项：
  - 把cpu主频限制在一个稳定的值。
    - 利用cpupower(文档：[1](https://wiki.archlinux.org/index.php/CPU_frequency_scaling_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)),[2](https://www.kernel.org/doc/Documentation/cpu-freq/governors.txt))以cpufrequtils.
  - 将干扰程序与server放在一个核上，将client放在其他核上。
    - taskset
  - 注意利用cpulimit限制干扰程序的cpu占用率，防止占满CPU导致tailbench测试程序进行网络包发送时发生错误，从而导致崩溃的情形。
- 针对cache的干扰程序
  - 定间隔访问
  - 随机访问

### 存在的问题及解决方案

- 在小盒子上进行测量时发现无法锁定CPU frequency，使用了张乾宇提供的方法后仍达不到指定效果。
  - 最后更换到杨兴杲处的服务器上后，采用相同策略，问题得到了解决。
  - 猜测问题是出在小盒子的功率管理功能上。
- 在xapian(websearch)上进行了实验。实验效果较为理想。
  - 干扰前，限制了CPU频率等条件后，测量结果非常稳定。
  - 加入干扰后，latency的上升非常明显（在相同logic core上混部）。

### 下周计划

- cache的干扰数据可以进行测量了。全部拿到baseline和数据。
- 查看memory的干扰方法。



## 第一周 2018.2.26 - 2018.3.2

请假。